# 训练数据多样性建议

## 当前问题
只使用五角星（Tremendous Hillar）G-code可能导致：
- 几何过拟合
- 运动模式单一
- 泛化能力差

## 推荐的测试形状分类

### 1. 基础几何形状（必须包含）
- **圆形/圆柱** (Circle/Cylinder)
  - 连续曲线
  - 恒定曲率
  - 无尖角

- **矩形/正方形** (Rectangle/Square)
  - 90°直角
  - 不同长度直线段
  - 规则重复

- **三角形** (Triangle)
  - 尖锐转角
  - 不等边边长

### 2. 复杂曲线（重要）
- **螺旋线** (Spiral)
  - 连续变化的曲率
  - 径向和切向速度耦合

- **正弦波路径**
  - 周期性加速度变化
  - 方向频繁改变

- **贝塞尔曲线**
  - 平滑路径规划
  - 非均匀运动

### 3. 实际打印件（最真实）
- **3D基准测试件**
  - 3DBenchy船（曲线、孔洞、斜坡）
  - Bunny等复杂几何

- **功能件**
  - 机械臂部件
  - 工程夹具
  - 结构件

- **艺术/复杂件**
  - 雕像
  - 艺术品
  - 参数化设计

## 数据收集策略建议

### 阶段1：基础几何（快速）
```matlab
% 添加以下G-code：
gcode_files = {
    'circle_test.gcode',      % 圆形
    'rectangle_test.gcode',   % 矩形
    'triangle_test.gcode',    % 三角形
    'star.gcode'              % 保留五角星
};
```

### 阶段2：复杂几何（中等）
```matlab
% 添加：
'spiral_test.gcode',         % 螺旋
'sine_wave.gcode',           % 正弦波
'complex_curve.gcode'        % 复杂曲线
```

### 阶段3：真实模型（完整）
```matlab
% 添加：
'3DBenchy.gcode',            % 标准测试件
'calibration_cube.gcode',    % 校准立方
'functional_part.gcode'      % 功能件
```

## 参数空间扩展

除了几何多样性，还需要考虑：

### 1. 层数范围
```matlab
layers = [5, 10, 15, 20, 25, 30, 50, 100];
% 不同层有不同的：
% - 热累积程度
% - 冷却时间
% - 层间粘合
```

### 2. 打印参数组合
```matlab
% 当前：加速度、速度、风扇、温度
% 建议添加：
% - 层高（0.1, 0.2, 0.3 mm）
% - 线宽（0.4, 0.6, 0.8 mm）
% - 打印速度范围扩大（30-150 mm/s）
```

### 3. 材料参数
```matlab
% 当前：PLA
% 未来考虑：
% - ABS（更高温度）
% - PETG（不同收缩率）
% - TPU（柔性材料）
```

## 数据集大小建议

### 最小可行数据集
- 3-5种几何形状
- 每种5-10层
- 每层5-10个参数组合
- **总计：~1000-5000个样本**

### 推荐数据集
- 8-12种几何形状
- 每种10-20层
- 每层10-20个参数组合
- **总计：~20000-50000个样本**

### 完整数据集
- 20+种几何形状
- 多层完整仿真
- 完整参数扫描
- **总计：~100000+个样本**

## 生成G-code的方法

### 选项1：使用现成的测试模型
```bash
# 在PrusaSlicer/Cura中切片
# 下载标准测试件：
- 3DBenchy
- All-in-One 3D Print Test
- Calibration Cube
```

### 选项2：程序化生成G-code
```matlab
% 创建generate_test_gcode.m
function generate_gcode(shape, params)
    % 生成简单几何的G-code
    switch shape
        case 'circle'
            generate_circle_gcode(params);
        case 'rectangle'
            generate_rectangle_gcode(params);
        % ...
    end
end
```

### 选项3：使用在线模型库
- Thingiverse
- Printables
- Cults3D

## 实施步骤

### 立即可做
1. 找1-2个简单形状G-code（圆形、矩形）
2. 添加到collect_data.m
3. 生成少量数据测试

### 短期（1-2天）
1. 准备5-8种不同G-code
2. 修改collect_data.m支持多文件
3. 生成基础数据集

### 长期（1周）
1. 完整的参数扫描
2. 多层仿真
3. 生成完整训练数据集

## 评估数据集质量

训练前检查：
- [ ] 至少3种不同曲率（直线、圆弧、复杂曲线）
- [ ] 至少3种转角类型（90°、锐角、钝角）
- [ ] 至少5层不同高度（早期、中期、后期）
- [ ] 参数覆盖预期的使用范围
- [ ] 每种特征有足够样本（>100）

## 总结

**五角星单一形状不足够**。建议：
1. 立即添加2-3种基础形状（圆、矩形、三角）
2. 短期扩展到8-12种形状
3. 目标：20000+样本，覆盖几何×参数×层的完整空间

这样才能训练出具有真正泛化能力的PINN模型。
